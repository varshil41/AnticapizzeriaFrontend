#include<conio.h>
#include<stdio.h>
#include<string.h>
char table[7][6][10]={
{"state","letter","digit","."},
{"start","id","int","E"},
{"id","id","id","E"},
{"int","E","int","S"},
{"E","E","E","E"},
{"S","E","real","E"},
{"real","E","real","E"}
};
char op[7][2]={"-","+","*","/",";",",","="};
char key[10][20]={"int","char","double","float","byte","long","short","boolean"};
char id[10][20];
char cr[10][20];
char ci[10][20];

int idn=0,crn=0,cin=0;
void dfa(char str[])
{
	int col,row,co,r,flag=0,len,idflag=0,crflag=0,ciflag=0,l,m;
	char c,state[20];
	strcpy(state,"start");
	len=strlen(str);

	for(l=0;l<len;l++)
	{
		for(r=0;r<7;r++)
		{
		       if(strcmp(state,table[r][0])==0)
		       {
			row=r;
		       }
		}
		c=str[l];
		if(c>=48 && c<=57)
		{
			strcpy(state,"digit");
		}
		else if(c>=65 && c<=90 || c>=97 && c<=122)
		{
			strcpy(state,"letter");
		}
		else if(c==48)
		{
			strcpy(state,".");
		}
		else
		{
			printf("\n Error");
			flag=1;
			break;
		}
		for(co=0;co<4;co++)
		{
			if(strcmp(state,table[0][co])==0)
			{
				col=co;
			}
		}
		strcpy(state,table[row][col]);
		if(strcmp(state,"E")==0)
		{
			printf("ERROR");
			flag=1;
			break;
		}
	}
	if(flag==0)
	{
		if(strcmp(state,"id")==0)
		{
			for(m=0;m<10;m++)
			{
				if(strcmp(id[m],str)==0)
				{
					printf("<#id%d>",m+1);
					idflag=1;
					break;
				}
			}
			if(idflag==0)
			{
				strcpy(id[idn],str);
				printf("<#id%d>",idn+1);
			}
			idn++;
		}
		else if(strcmp(state,"int")==0)
		{
			for(m=0;m<10;m++)
			{
				if(strcmp(ci[m],str)==0)
				{
					printf("<#ci%d>",m+1);
					ciflag=1;
					break;
				}
			}
			if(ciflag==0)
			{
				strcpy(ci[cin],str);
				printf("<#ci%d>",cin+1);
			}
			cin++;
		}
		else if(strcmp(state,"real")==0)
		{
			for(m=0;m<10;m++)
			{
				if(strcmp(cr[m],str)==0)
				{
					printf("<#cr%d>",m+1);
					crflag=1;
					break;
				}
			}
			if(crflag==0)
			{
				strcpy(cr[crn],str);
				printf("<#cr%d>",crn+1);
			}
			crn++;
		}
	}

}
void operators(char str[])
{
	int flag=0,i;
	char *temp=str;
	for(i=0;i<7;i++)
	{
		if(strcmp(temp,op[i])==0)
		{
			flag=1;
			break;
		}
	}
	if(flag==1)
	{
		printf("<#op%d>",i+1);
	}
	else
	{
		dfa(temp);
	}
}
void keywords(char str[])
{
	int flag=0,i;
	char *temp;
	temp=strtok(str," ");
	while(temp)
	{
		for(i=0;i<8;i++)
		{
			if(strcmp(temp,key[i])==0)
			{
				flag=1;
			}
		}
		if(flag==1)
		{
			printf("<#kw%d>",i+1);
		}
		else
		{
			operators(temp);
		}
		temp=strtok(NULL," ");
	}
}
void main()
{
char input[100];
clrscr();
printf("\nenter\n");
gets(input);
keywords(input);
getch();
}