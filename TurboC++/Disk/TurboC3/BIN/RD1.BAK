#include<stdio.h>
#include<conio.h>
#include<iostream.h>
#include<ctype.h>
#include<string.h>

struct ast
{
	char val;
	struct ast *left;
	struct ast *right;
};
static int ssm=0,flag=0;
typedef struct ast astnode;

astnode * proc_v(char input[])
{
	astnode *av;
	astnode *newnode = new astnode;
	char sym=input[ssm];
	if(isalpha(sym)!=0)
	{
		ssm++;
		newnode->val=sym;
		newnode->left=NULL;
		newnode->right=NULL;
	}
	else
	{
		cout<<"\nerror "<<sym<<" not idenfying";
		flag++;
	}
	return newnode;
}
astnode * proc_t(char input[])
{
	astnode *at;
	astnode *bt;
	at=proc_v(input);
	char sym=input[ssm];
	while(sym=='*'||sym=='/')
	{
		char c = sym;
		ssm++;
		bt=proc_v(input);
		astnode *newnode = new astnode;
		newnode->val=c;
		newnode->left=at;
		newnode->right=bt;
		at=newnode;
		sym=input[ssm];
	}
	return at;
}
astnode * proc_e(char input[])
{
	astnode *ae;
	astnode *be;
	ae=proc_t(input);
	char sym=input[ssm];
	while(sym=='+' || sym=='-')
	{
		char c = sym;
		ssm++;
		be = proc_t(input);
		astnode *newnode = new astnode;
		newnode->val=c;
		newnode->left=ae;
		newnode->right=be;
		ae=newnode;
		sym=input[ssm];
	}
	return ae;
}
void pre(astnode * node1)
{
	if(node1!=NULL)
	{
		cout<<"\t"<<node1->val;
		pre(node1->left);
		pre(node1->right);
	}
}
void post(astnode * node1)
{
	if(node1!=NULL)
	{
		post(node1->left);
		post(node1->right);
		cout<<"\t"<<node1->val;
	}
}
void in(astnode * node1)
{
	if(node1!=NULL)
	{
		post(node1->left);
		cout<<"\t"<<node1->val;
		post(node1->right);
	}
}
void main()
{
	char str[30];
	int choice;
	astnode *start = proc_e(str);
	clrscr();
	cout<<"\n1 for pre \n 2 for post \n 3 for in\n";
	cin>>choice;
	cout<<"\nenter string";
	cin>>str;
	if(choice==1)
	{
	  pre(start);
	}
	else if(choice==2)
	{
		post(start);
	}
	else
	{
		in(start);
	}
	getch();
}